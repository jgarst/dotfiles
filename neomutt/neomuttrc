source vim-keys.rc
set mailcap_path = ~/config/neomutt/mailcap

# jump to w3m (or whatever is defined in mailcap) for html emails
auto_view text/html
# use text encoding first
alternative_order text/plain text/html

set my_user = jhg@fastmail.com
set my_pass = `pass fastmail/mutt`
alternates cultofjared@gmail.com|jared.h.garst@gmail.com

set charset = "utf-8"
set send_charset = "utf-8"

# don't ask to resume postponed messages
set recall = no

set mbox_type = Maildir  # Maildir is an alternate mail storage format
set folder = ~/mail/jhg
set spoolfile = +INBOX


set postponed = "+Drafts"  # Specify location for postponed messages.
set trash = "+Trash"  # Specify location to move deleted messages.

set timeout = 3     # idle time before scanning
set mail_check = 0  # minimum time between scans
set pipe_decode     # strip headers and eval mimes when piping

mailboxes +INBOX \
          +Archive \
          +Sent \
          +Drafts


set virtual_spoolfile=yes
virtual-mailboxes "inbox" "notmuch://?query=folder:INBOX"
virtual-mailboxes "archive" "notmuch://?query=folder:Archive"
virtual-mailboxes "drafts" "notmuch://?query=folder:Drafts"
virtual-mailboxes "sent" "notmuch://?query=folder:Sent"
virtual-mailboxes "spam" "notmuch://?query=folder:Spam"
virtual-mailboxes "trash" "notmuch://?query=folder:Trash"


set sidebar_visible = yes
set sidebar_width = 24

set date_format = "%m/%d"
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"

set index_format = "[%Z]  %D  %-20.20F  %s"

unset confirmappend

# arrow keys to move around folders
bind index,pager <down>     sidebar-next
bind index,pager <up>       sidebar-prev
bind index,pager <right>    sidebar-open

# Faster folder switch
set sleep_time = 0

set mark_old = yes  # do not mark emails as old on exit


# do not duplicate sent saving?
set record = "+Sent"

set realname = "Jared Hall Garst"
set from = "jhg@fastmail.com"
set use_from = yes

# use 'p' to postpone and recall messages
bind compose p postpone-message
bind index p recall-message

# do not display esoteric headers
ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: date: subject:

set smtp_url = smtps://$my_user:$my_pass@smtp.fastmail.com

# copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

# open urls
macro pager \Cu "|urlscan<enter>" "call urlscan to open links"

# manually fetch mail with offlineimap
macro index o "<shell-escape>offlineimap<enter>" "run offlineimap to sync inbox"
