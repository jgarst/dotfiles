#! /usr/bin/env sh
set -uf

pikaur -Syu --config "${XDG_CONFIG_HOME}/pacman.d/pacman.conf"

orphans=$(pikaur -Qtdq --config "${XDG_CONFIG_HOME}/pacman.d/pacman.conf")

if [ -n "${orphans}" ]
then
    pikaur -Rns --config "${XDG_CONFIG_HOME}/pacman.d/pacman.conf" "${orphans}"
fi

if [ -d ~/pass/.git ]
then
    git -C ~/pass push
fi


if [ -x "$(command -v fwupdmgr)" ]
then
    fwupdmgr refresh && fwupdmgr get-updates
fi
