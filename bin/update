#! /usr/bin/env bash
set -uf

pikaur -Syu

printf "\n"
printf "\033[1mchecking for orphaned packages\033[0m\n"
mapfile -t orphans < <(pikaur -Qtdq)

if [ ${#orphans[@]} -ne 0 ]
then
    pikaur -Rns "${orphans[*]}"
fi

if [ -d ~/pass/.git ]
then
    git -C ~/pass push
fi


if [ -x "$(command -v fwupdmgr)" ]
then
    fwupdmgr refresh && fwupdmgr get-updates
fi
